<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BiGeo - Empowering Rural Producers, Connecting Urban Demand</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header id="main-header" class="header">
        <div class="header-content">
            <div class="header-left">
                <button id="back-home-btn" class="btn-icon" title="Back to Home" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </button>
                <h1 class="logo">BiGeo</h1>
                <span id="dashboard-title" class="dashboard-name"></span>
            </div>
            <div class="header-right">
                <button id="lang-toggle" class="btn btn--secondary btn--sm">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
                <button id="offline-toggle" class="btn btn--secondary btn--sm">Offline Mode</button>
            </div>
        </div>
    </header>

    <!-- Offline Banner -->
    <div id="offline-banner" class="offline-banner" style="display: none;">
        ‚ö†Ô∏è <span data-translate="offline-message">Working in offline mode - data will sync when online</span>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Landing Page -->
    <section id="landing-page" class="landing-page">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-content fade-in-up">
                <h1 class="hero-tagline">Empowering Rural Producers, Connecting Urban Demand</h1>
                <p class="hero-subtitle">
                    Bridging the gap between rural MSMEs and urban markets through seamless logistics
                </p>
                <div class="hero-cta-buttons">
                    <button class="btn-hero btn-hero--primary" onclick="scrollToSection('role-selection')">Start Selling</button>
                    <button class="btn-hero btn-hero--secondary" onclick="scrollToSection('products-showcase')">Shop Now</button>
                </div>
            </div>
            <div class="hero-background">
                <div class="floating-shape shape-1"></div>
                <div class="floating-shape shape-2"></div>
                <div class="floating-shape shape-3"></div>
                <div class="floating-shape shape-4"></div>
            </div>
            <div class="scroll-indicator" onclick="scrollToSection('about')">
                <span>‚Üì</span>
            </div>
        </div>

        <!-- Join the BiGeo Revolution Section (MOVED HERE) -->
        <section id="role-selection" class="section revolution-section">
            <div class="particles-background" id="particles-bg"></div>
            <div class="container">
                <h2 class="section-title centered revolution-title">Join the BiGeo Revolution</h2>
                <p class="revolution-subtitle">Choose your role and start transforming rural commerce today</p>
                <div class="role-selection-grid revolution-grid">
                    <button class="role-card role-card-producer" data-role="producer">
                        <div class="role-card-glow"></div>
                        <span class="role-icon">üè∫</span>
                        <span class="role-label">Producer</span>
                        <span class="role-label-te">‡∞â‡∞§‡±ç‡∞™‡∞§‡±ç‡∞§‡∞ø‡∞¶‡∞æ‡∞∞‡±Å</span>
                        <span class="role-description">Register &amp; track your handcrafted products</span>
                        <span class="role-cta">Enter Dashboard ‚Üí</span>
                    </button>
                    <button class="role-card role-card-rca" data-role="rca">
                        <div class="role-card-glow"></div>
                        <span class="role-icon">üöö</span>
                        <span class="role-label">RCA Agent</span>
                        <span class="role-label-te">RCA ‡∞è‡∞ú‡±Ü‡∞Ç‡∞ü‡±ç</span>
                        <span class="role-description">Collect products from villages</span>
                        <span class="role-cta">Enter Dashboard ‚Üí</span>
                    </button>
                    <button class="role-card role-card-hub" data-role="hub">
                        <div class="role-card-glow"></div>
                        <span class="role-icon">üè¢</span>
                        <span class="role-label">Hub Operator</span>
                        <span class="role-label-te">‡∞π‡∞¨‡±ç ‡∞Ü‡∞™‡∞∞‡±á‡∞ü‡∞∞‡±ç</span>
                        <span class="role-description">Quality control &amp; sorting</span>
                        <span class="role-cta">Enter Dashboard ‚Üí</span>
                    </button>
                    <button class="role-card role-card-consumer" data-role="consumer">
                        <div class="role-card-glow"></div>
                        <span class="role-icon">üõçÔ∏è</span>
                        <span class="role-label">Consumer</span>
                        <span class="role-label-te">‡∞ï‡∞∏‡±ç‡∞ü‡∞Æ‡∞∞‡±ç</span>
                        <span class="role-description">Shop authentic rural products</span>
                        <span class="role-cta">Enter Dashboard ‚Üí</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section about-section">
            <div class="container">
                <div class="section-content">
                    <div class="about-graphic scroll-fade-in">
                        <div class="about-illustration">
                            <div class="illustration-circle circle-1">üèòÔ∏è</div>
                            <div class="illustration-line"></div>
                            <div class="illustration-circle circle-2">üèôÔ∏è</div>
                        </div>
                    </div>
                    <div class="about-text scroll-fade-in-right">
                        <h2 class="section-title">About BiGeo</h2>
                        <p class="section-description">
                            BiGeo is revolutionizing rural commerce by connecting talented MSME producers with eager urban customers. 
                            We empower rural artisans, craftspeople, and small manufacturers to reach nationwide markets.
                        </p>
                        <p class="section-description">
                            Through our integrated logistics network, we ensure products move seamlessly from village workshops to city doorsteps.
                        </p>
                        <div class="stats-counter">
                            <div class="stat-item">
                                <div class="stat-number" data-target="500">0</div>
                                <div class="stat-text">Rural Producers</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" data-target="10000">0</div>
                                <div class="stat-text">Products Delivered</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" data-target="50">0</div>
                                <div class="stat-text">Villages Connected</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" data-target="15">0</div>
                                <div class="stat-text">Urban Cities Served</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="section services-section">
            <div class="container">
                <h2 class="section-title centered">Our Services</h2>
                <div class="services-grid">
                    <div class="service-card scroll-stagger" style="--delay: 0">
                        <div class="service-icon">üìç</div>
                        <h3 class="service-title">Rural Collection Network</h3>
                        <p class="service-description">Pickup from your doorstep in remote villages</p>
                    </div>
                    <div class="service-card scroll-stagger" style="--delay: 1">
                        <div class="service-icon">‚úì</div>
                        <h3 class="service-title">Quality Assurance</h3>
                        <p class="service-description">Expert quality checks at regional hubs</p>
                    </div>
                    <div class="service-card scroll-stagger" style="--delay: 2">
                        <div class="service-icon">üöö</div>
                        <h3 class="service-title">Secure Logistics</h3>
                        <p class="service-description">GPS-tracked delivery with real-time updates</p>
                    </div>
                    <div class="service-card scroll-stagger" style="--delay: 3">
                        <div class="service-icon">üí∞</div>
                        <h3 class="service-title">Escrow Protection</h3>
                        <p class="service-description">Payment released at delivery milestones</p>
                    </div>
                    <div class="service-card scroll-stagger" style="--delay: 4">
                        <div class="service-icon">üõí</div>
                        <h3 class="service-title">Digital Marketplace</h3>
                        <p class="service-description">Online storefront for rural products</p>
                    </div>
                    <div class="service-card scroll-stagger" style="--delay: 5">
                        <div class="service-icon">üåê</div>
                        <h3 class="service-title">Multilingual Support</h3>
                        <p class="service-description">English &amp; Telugu interface</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Showcase Section -->
        <section id="products-showcase" class="section products-showcase-section">
            <div class="container">
                <h2 class="section-title centered">Featured Products from Rural MSMEs</h2>
                <div class="products-carousel">
                    <button class="carousel-btn carousel-btn--prev" onclick="scrollCarousel(-1)">‚Äπ</button>
                    <div class="products-carousel-track" id="products-carousel">
                        <!-- Products will be dynamically inserted here -->
                    </div>
                    <button class="carousel-btn carousel-btn--next" onclick="scrollCarousel(1)">‚Ä∫</button>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="section how-it-works-section">
            <div class="container">
                <h2 class="section-title centered">How BiGeo Works</h2>
                <div class="timeline-flow">
                    <div class="flow-step scroll-fade-in" style="--delay: 0">
                        <div class="flow-icon" style="background: var(--color-bg-1);">1</div>
                        <h3 class="flow-title">Producer Registers</h3>
                        <p class="flow-description">Rural MSME lists products on platform</p>
                    </div>
                    <div class="flow-connector"></div>
                    <div class="flow-step scroll-fade-in" style="--delay: 1">
                        <div class="flow-icon" style="background: var(--color-bg-2);">2</div>
                        <h3 class="flow-title">Customer Orders</h3>
                        <p class="flow-description">Urban customer places order online</p>
                    </div>
                    <div class="flow-connector"></div>
                    <div class="flow-step scroll-fade-in" style="--delay: 2">
                        <div class="flow-icon" style="background: var(--color-bg-3);">3</div>
                        <h3 class="flow-title">RCA Collects</h3>
                        <p class="flow-description">Local agent picks up from producer</p>
                    </div>
                    <div class="flow-connector"></div>
                    <div class="flow-step scroll-fade-in" style="--delay: 3">
                        <div class="flow-icon" style="background: var(--color-bg-4);">4</div>
                        <h3 class="flow-title">Hub Processes</h3>
                        <p class="flow-description">Quality check and sorting at regional hub</p>
                    </div>
                    <div class="flow-connector"></div>
                    <div class="flow-step scroll-fade-in" style="--delay: 4">
                        <div class="flow-icon" style="background: var(--color-bg-5);">5</div>
                        <h3 class="flow-title">Delivery</h3>
                        <p class="flow-description">Product delivered to customer's door</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="section testimonials-section">
            <div class="container">
                <h2 class="section-title centered">What Our Community Says</h2>
                <div class="testimonials-grid">
                    <div class="testimonial-card scroll-slide-in" style="--delay: 0">
                        <div class="testimonial-avatar">L</div>
                        <p class="testimonial-text">
                            "BiGeo helped me reach customers across India. My handloom sarees are now appreciated nationwide!"
                        </p>
                        <div class="testimonial-author">
                            <strong>Lakshmi Devi</strong>
                            <span>Handloom Weaver, Raghavapuram</span>
                        </div>
                    </div>
                    <div class="testimonial-card scroll-slide-in" style="--delay: 1">
                        <div class="testimonial-avatar">A</div>
                        <p class="testimonial-text">
                            "I love supporting rural artisans directly. The quality is authentic and the platform is so easy to use!"
                        </p>
                        <div class="testimonial-author">
                            <strong>Arjun</strong>
                            <span>Customer, Hyderabad</span>
                        </div>
                    </div>
                    <div class="testimonial-card scroll-slide-in" style="--delay: 2">
                        <div class="testimonial-avatar">R</div>
                        <p class="testimonial-text">
                            "Proud to serve my village community. BiGeo provides steady work and helps our local producers thrive."
                        </p>
                        <div class="testimonial-author">
                            <strong>Ramesh</strong>
                            <span>Collection Agent, Kondapalli</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3 class="footer-logo">BiGeo</h3>
                        <p class="footer-tagline">Connecting Rural Excellence with Urban Markets</p>
                        <div class="footer-social">
                            <a href="#" class="social-icon">üìò</a>
                            <a href="#" class="social-icon">üì∑</a>
                            <a href="#" class="social-icon">üê¶</a>
                        </div>
                    </div>
                    <div class="footer-column">
                        <h4>Quick Links</h4>
                        <a href="#about">About</a>
                        <a href="#services">Services</a>
                        <a href="#products-showcase">Products</a>
                        <a href="#how-it-works">How It Works</a>
                    </div>
                    <div class="footer-column">
                        <h4>For Producers</h4>
                        <a href="#" onclick="showDashboard('producer')">Register</a>
                        <a href="#" onclick="showDashboard('producer')">Dashboard</a>
                        <a href="#">Resources</a>
                        <a href="#">Support</a>
                    </div>
                    <div class="footer-column">
                        <h4>For Customers</h4>
                        <a href="#" onclick="showDashboard('consumer')">Shop</a>
                        <a href="#" onclick="showDashboard('consumer')">Track Order</a>
                        <a href="#">Help</a>
                        <a href="#">FAQs</a>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 BiGeo. All rights reserved.</p>
                    <p>Contact: support@bigeo.in | +91 98765 00000</p>
                </div>
            </div>
        </footer>
    </section>

    <!-- Producer Dashboard -->
    <section id="producer-dashboard" class="dashboard dashboard-producer" style="display: none;">
        <div class="dashboard-particles" id="producer-particles"></div>
        <div class="dashboard-header-banner">
            <h2 class="dashboard-welcome">Welcome, Producer! üè∫</h2>
            <p class="dashboard-subtitle">Manage your products and track earnings</p>
        </div>
        
        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <button class="tab-btn active" onclick="switchTab('producer', 'main')">Main Dashboard</button>
            <button class="tab-btn" onclick="switchTab('producer', 'analytics')">üìä Analytics</button>
        </div>
        
        <!-- Main Dashboard -->
        <div id="producer-main-tab" class="tab-content active">
        <div class="dashboard-grid">
            <div class="card">
                <div class="card__header">
                    <h2 data-translate="register-product">Register Product</h2>
                </div>
                <div class="card__body">
                    <form id="register-product-form">
                        <div class="form-group">
                            <label class="form-label" data-translate="product-name">Product Name</label>
                            <input type="text" class="form-control" id="prod-name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="quantity">Quantity</label>
                            <input type="text" class="form-control" id="prod-quantity" placeholder="e.g., 50 kg" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="category">Category</label>
                            <select class="form-control" id="prod-category" required>
                                <option value="Handloom Textiles">Handloom Textiles</option>
                                <option value="Bamboo Crafts">Bamboo Crafts</option>
                                <option value="Spices & Food Products">Spices &amp; Food Products</option>
                                <option value="Pottery & Ceramics">Pottery &amp; Ceramics</option>
                                <option value="Handmade Jewelry">Handmade Jewelry</option>
                                <option value="Wooden Handicrafts">Wooden Handicrafts</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="quality-grade">Quality Grade</label>
                            <select class="form-control" id="prod-grade" required>
                                <option value="A">Grade A</option>
                                <option value="B">Grade B</option>
                                <option value="C">Grade C</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="location">Village Location</label>
                            <div class="location-input-group">
                                <input type="text" class="form-control" id="prod-location" readonly placeholder="Click to select location" required>
                                <button type="button" class="btn-icon" onclick="openLocationPicker(function(loc) { document.getElementById('prod-location').value = loc.address; document.getElementById('prod-location-coords').value = JSON.stringify(loc); })">
                                    üìç Select on Map
                                </button>
                            </div>
                            <input type="hidden" id="prod-location-coords">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="pickup-date">Expected Pickup Date</label>
                            <input type="date" class="form-control" id="prod-date" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width" data-translate="submit">Submit</button>
                    </form>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2 data-translate="my-products">My Products</h2>
                </div>
                <div class="card__body">
                    <div id="producer-products-list" class="products-list"></div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2 data-translate="track-shipment">Track Shipment</h2>
                </div>
                <div class="card__body">
                    <div class="status-timeline">
                        <div class="timeline-item completed">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <strong>Registered</strong>
                                <span>Product registered</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <strong>RCA Pickup</strong>
                                <span>Collection in progress</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <strong>Hub Processing</strong>
                                <span>Quality check</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <strong>In Transit</strong>
                                <span>En route to city</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <strong>Delivered</strong>
                                <span>Completed</span>
                            </div>
                        </div>
                    </div>
                    <div id="producer-map" class="map-container"></div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>Escrow Status</h2>
                </div>
                <div class="card__body">
                    <div id="producer-escrow" class="escrow-visualization"></div>
                </div>
            </div>
        </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="producer-analytics-tab" class="tab-content" style="display: none;">
            <div class="analytics-header">
                <h2>Analytics Dashboard</h2>
                <div class="date-filter">
                    <select id="producer-time-range" class="form-control form-control--sm">
                        <option>Last 7 Days</option>
                        <option>Last 30 Days</option>
                        <option selected>Last 3 Months</option>
                        <option>Last 6 Months</option>
                        <option>Last Year</option>
                    </select>
                </div>
            </div>
            
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" id="producer-kpi-revenue">0</div>
                    <div class="kpi-label">Total Revenue</div>
                    <div class="kpi-change positive">+15%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üì¶</div>
                    <div class="kpi-value" id="producer-kpi-products">0</div>
                    <div class="kpi-label">Total Products</div>
                    <div class="kpi-change positive">+8%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">‚≠ê</div>
                    <div class="kpi-value" id="producer-kpi-rating">0</div>
                    <div class="kpi-label">Avg. Rating</div>
                    <div class="kpi-change positive">+0.2</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üë•</div>
                    <div class="kpi-value" id="producer-kpi-customers">0</div>
                    <div class="kpi-label">Repeat Customers</div>
                    <div class="kpi-change positive">+12%</div>
                </div>
            </div>
            
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Sales Performance</h3>
                    <canvas id="producer-sales-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Product Categories</h3>
                    <canvas id="producer-category-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Order Status</h3>
                    <canvas id="producer-status-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Monthly Product Listings</h3>
                    <canvas id="producer-listings-chart"></canvas>
                </div>
                <div class="chart-card full-width">
                    <h3>Top Performing Products</h3>
                    <canvas id="producer-top-products-chart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- RCA Dashboard -->
    <section id="rca-dashboard" class="dashboard dashboard-rca" style="display: none;">
        <div class="dashboard-particles" id="rca-particles"></div>
        <div class="dashboard-header-banner">
            <h2 class="dashboard-welcome">Welcome, RCA Agent! üöö</h2>
            <p class="dashboard-subtitle">Collect and dispatch products efficiently</p>
        </div>
        
        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <button class="tab-btn active" onclick="switchTab('rca', 'main')">Main Dashboard</button>
            <button class="tab-btn" onclick="switchTab('rca', 'analytics')">üìä Analytics</button>
        </div>
        
        <!-- Main Dashboard -->
        <div id="rca-main-tab" class="tab-content active">
        <div class="dashboard-grid">
            <div class="card">
                <div class="card__header">
                    <h2>Pending Pickups</h2>
                    <div class="filter-controls">
                        <select class="form-control form-control--sm" id="rca-filter-village">
                            <option value="">All Villages</option>
                            <option value="Raghavapuram">Raghavapuram</option>
                            <option value="Peddapur">Peddapur</option>
                            <option value="Kondapalli">Kondapalli</option>
                            <option value="Muppavarapu">Muppavarapu</option>
                            <option value="Nadukuru">Nadukuru</option>
                        </select>
                    </div>
                </div>
                <div class="card__body">
                    <div id="rca-pending-list" class="pending-list"></div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>QR Scanner</h2>
                </div>
                <div class="card__body">
                    <div class="qr-scanner-controls">
                        <button class="btn btn--primary" id="rca-scan-qr">üì∑ Scan QR Code</button>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label class="form-label">Or Enter Product ID</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" class="form-control" id="rca-manual-id" placeholder="BG-PROD-XXXX">
                                <button class="btn btn--secondary" id="rca-manual-submit">Verify</button>
                            </div>
                        </div>
                    </div>
                    <div id="rca-scan-result" class="scan-result"></div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>Create Dispatch</h2>
                </div>
                <div class="card__body">
                    <form id="create-dispatch-form">
                        <div class="form-group">
                            <label class="form-label">Select Products (comma-separated IDs)</label>
                            <input type="text" class="form-control" id="dispatch-products" placeholder="BG-PROD-0001, BG-PROD-0002" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Assign to Hub</label>
                            <select class="form-control" id="dispatch-hub" required>
                                <option value="Vijayawada Hub">Vijayawada Hub</option>
                                <option value="Guntur Hub">Guntur Hub</option>
                                <option value="Eluru Hub">Eluru Hub</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Vehicle Type</label>
                            <select class="form-control" id="dispatch-vehicle" required>
                                <option value="Truck">Truck</option>
                                <option value="Van">Van</option>
                                <option value="Tempo">Tempo</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Driver Name</label>
                            <input type="text" class="form-control" id="dispatch-driver" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Expected Arrival Time</label>
                            <input type="datetime-local" class="form-control" id="dispatch-eta" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Create Dispatch</button>
                    </form>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>Collection Summary</h2>
                </div>
                <div class="card__body">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="rca-collected">0</div>
                            <div class="stat-label">Collected Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="rca-pending">0</div>
                            <div class="stat-label">Pending</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="rca-dispatches">0</div>
                            <div class="stat-label">Dispatches Created</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="rca-analytics-tab" class="tab-content" style="display: none;">
            <div class="analytics-header">
                <h2>Analytics Dashboard</h2>
                <div class="date-filter">
                    <select id="rca-time-range" class="form-control form-control--sm">
                        <option>Last 7 Days</option>
                        <option selected>Last 30 Days</option>
                        <option>Last 3 Months</option>
                    </select>
                </div>
            </div>
            
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üì¶</div>
                    <div class="kpi-value" id="rca-kpi-collections">0</div>
                    <div class="kpi-label">Total Collections</div>
                    <div class="kpi-change positive">+18%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üöó</div>
                    <div class="kpi-value" id="rca-kpi-distance">0</div>
                    <div class="kpi-label">Distance (km)</div>
                    <div class="kpi-change positive">+120 km</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" id="rca-kpi-daily">0</div>
                    <div class="kpi-label">Avg. Daily Collections</div>
                    <div class="kpi-change positive">+2</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">‚è±Ô∏è</div>
                    <div class="kpi-value" id="rca-kpi-ontime">0</div>
                    <div class="kpi-label">On-time Rate</div>
                    <div class="kpi-change positive">+5%</div>
                </div>
            </div>
            
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Daily Collections Trend</h3>
                    <canvas id="rca-collections-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Collection by Village</h3>
                    <canvas id="rca-village-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Pickup Status Distribution</h3>
                    <canvas id="rca-status-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Distance Covered (Weekly)</h3>
                    <canvas id="rca-distance-chart"></canvas>
                </div>
                <div class="chart-card full-width">
                    <h3>Product Category Collections</h3>
                    <canvas id="rca-category-chart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- Hub Operator Dashboard -->
    <section id="hub-dashboard" class="dashboard dashboard-hub" style="display: none;">
        <div class="dashboard-particles" id="hub-particles"></div>
        <div class="dashboard-header-banner">
            <h2 class="dashboard-welcome">Welcome, Hub Operator! üè¢</h2>
            <p class="dashboard-subtitle">Quality control and logistics management</p>
        </div>
        
        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <button class="tab-btn active" onclick="switchTab('hub', 'main')">Main Dashboard</button>
            <button class="tab-btn" onclick="switchTab('hub', 'analytics')">üìä Analytics</button>
        </div>
        
        <!-- Main Dashboard -->
        <div id="hub-main-tab" class="tab-content active">
        <div class="dashboard-grid">
            <div class="card">
                <div class="card__header">
                    <h2>Incoming Shipments</h2>
                </div>
                <div class="card__body">
                    <div id="hub-incoming-list" class="incoming-list"></div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>QC Scoring</h2>
                </div>
                <div class="card__body">
                    <form id="qc-form">
                        <div class="form-group">
                            <label class="form-label">Select Product</label>
                            <select class="form-control" id="qc-product" required>
                                <option value="">Select a product...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Appearance (1-10)</label>
                            <input type="number" class="form-control" id="qc-appearance" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Freshness (1-10)</label>
                            <input type="number" class="form-control" id="qc-freshness" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Packaging (1-10)</label>
                            <input type="number" class="form-control" id="qc-packaging" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Overall Grade</label>
                            <select class="form-control" id="qc-grade" required>
                                <option value="Excellent">Excellent</option>
                                <option value="Good">Good</option>
                                <option value="Fair">Fair</option>
                                <option value="Poor">Poor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" id="qc-notes" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Submit QC Score</button>
                    </form>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>Sort &amp; Forward</h2>
                </div>
                <div class="card__body">
                    <form id="forward-form">
                        <div class="form-group">
                            <label class="form-label">Destination City</label>
                            <select class="form-control" id="forward-city" required>
                                <option value="Hyderabad">Hyderabad</option>
                                <option value="Bangalore">Bangalore</option>
                                <option value="Chennai">Chennai</option>
                                <option value="Visakhapatnam">Visakhapatnam</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Products (comma-separated IDs)</label>
                            <input type="text" class="form-control" id="forward-products" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Transport Vehicle</label>
                            <input type="text" class="form-control" id="forward-vehicle" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Create Outbound Batch</button>
                    </form>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>Hub Status</h2>
                </div>
                <div class="card__body">
                    <div id="hub-map" class="map-container" style="height: 300px;"></div>
                    <div class="form-group" style="margin-top: 1rem;">
                        <label class="form-label">Storage Capacity</label>
                        <div class="progress-bar">
                            <div class="progress-bar-fill" style="width: 65%;">65%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="hub-analytics-tab" class="tab-content" style="display: none;">
            <div class="analytics-header">
                <h2>Analytics Dashboard</h2>
                <div class="date-filter">
                    <select id="hub-time-range" class="form-control form-control--sm">
                        <option>Last 7 Days</option>
                        <option selected>Last 30 Days</option>
                        <option>Last 3 Months</option>
                    </select>
                </div>
            </div>
            
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">‚úÖ</div>
                    <div class="kpi-value" id="hub-kpi-processed">0</div>
                    <div class="kpi-label">Total Processed</div>
                    <div class="kpi-change positive">+25%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">‚è±Ô∏è</div>
                    <div class="kpi-value" id="hub-kpi-time">0</div>
                    <div class="kpi-label">Avg. Processing Time</div>
                    <div class="kpi-change positive">-2 hrs</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üéØ</div>
                    <div class="kpi-value" id="hub-kpi-quality">0</div>
                    <div class="kpi-label">Quality Pass Rate</div>
                    <div class="kpi-change positive">+3%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üì¶</div>
                    <div class="kpi-value" id="hub-kpi-utilization">0</div>
                    <div class="kpi-label">Hub Utilization</div>
                    <div class="kpi-change positive">+8%</div>
                </div>
            </div>
            
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Incoming vs Outgoing</h3>
                    <canvas id="hub-flow-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Quality Score Distribution</h3>
                    <canvas id="hub-quality-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Processing Time Trend</h3>
                    <canvas id="hub-processing-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Destination Cities</h3>
                    <canvas id="hub-destination-chart"></canvas>
                </div>
                <div class="chart-card full-width">
                    <h3>Product Condition on Arrival</h3>
                    <canvas id="hub-condition-chart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- Consumer Dashboard -->
    <section id="consumer-dashboard" class="dashboard dashboard-consumer" style="display: none;">
        <div class="dashboard-particles" id="consumer-particles"></div>
        <div class="dashboard-header-banner">
            <h2 class="dashboard-welcome">Welcome, Shopper! üõçÔ∏è</h2>
            <p class="dashboard-subtitle">Discover authentic rural products</p>
        </div>
        
        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <button class="tab-btn active" onclick="switchTab('consumer', 'main')">Shop Products</button>
            <button class="tab-btn" onclick="switchTab('consumer', 'analytics')">üìä My Analytics</button>
        </div>
        
        <!-- Main Dashboard -->
        <div id="consumer-main-tab" class="tab-content active">
        <div class="dashboard-grid">
            <div class="card">
                <div class="card__header">
                    <h2>Available Products</h2>
                    <div class="filter-controls">
                        <select class="form-control form-control--sm" id="consumer-filter-category">
                            <option value="">All Categories</option>
                            <option value="Handloom Textiles">Handloom Textiles</option>
                            <option value="Bamboo Crafts">Bamboo Crafts</option>
                            <option value="Spices & Food Products">Spices &amp; Food</option>
                            <option value="Pottery & Ceramics">Pottery &amp; Ceramics</option>
                            <option value="Handmade Jewelry">Jewelry</option>
                            <option value="Wooden Handicrafts">Wooden Handicrafts</option>
                        </select>
                    </div>
                </div>
                <div class="card__body">
                    <div id="consumer-products-grid" class="products-grid"></div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>My Orders</h2>
                </div>
                <div class="card__body">
                    <div id="consumer-orders-list" class="orders-list"></div>
                </div>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
                <div class="tracking-map-container">
                    <div class="tracking-header">
                        <h2>Live Delivery Tracking</h2>
                        <div class="tracking-info">
                            <div class="info-item">
                                <span class="label">ETA:</span>
                                <span class="value" id="consumer-eta">25 minutes</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Distance:</span>
                                <span class="value" id="consumer-distance">8.5 km</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Status:</span>
                                <span class="badge badge-enroute">En Route</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="consumer-map" style="height: 500px; width: 100%; border-radius: 12px;"></div>
                    
                    <div class="tracking-details">
                        <div class="location-card">
                            <div class="icon">üìç</div>
                            <div class="details">
                                <h4>Pickup Location</h4>
                                <p>Raghavapuram Village, Andhra Pradesh</p>
                                <span class="timestamp">Picked up at 10:30 AM</span>
                            </div>
                        </div>
                        
                        <div class="location-card">
                            <div class="icon">üè≠</div>
                            <div class="details">
                                <h4>Hub Location</h4>
                                <p>Vijayawada Hub, Andhra Pradesh</p>
                                <span class="timestamp">Processed at 12:45 PM</span>
                            </div>
                        </div>
                        
                        <div class="location-card active">
                            <div class="icon">üöö</div>
                            <div class="details">
                                <h4>Current Location</h4>
                                <p id="consumer-current-location">NH16, Near Gannavaram</p>
                                <span class="timestamp" id="consumer-current-time">Now</span>
                            </div>
                        </div>
                        
                        <div class="location-card pending">
                            <div class="icon">üè†</div>
                            <div class="details">
                                <h4>Delivery Location</h4>
                                <p>Hitech City, Hyderabad, Telangana</p>
                                <span class="timestamp">Est. arrival: 2:30 PM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card__header">
                    <h2>Delivery Confirmation</h2>
                </div>
                <div class="card__body">
                    <form id="delivery-confirm-form">
                        <div class="form-group">
                            <label class="form-label">Delivery Address</label>
                            <div class="location-input-group">
                                <input type="text" class="form-control" id="consumer-address" readonly placeholder="Click to select location">
                                <button type="button" class="btn-icon" onclick="openLocationPicker(function(loc) { document.getElementById('consumer-address').value = loc.address; })">
                                    üìç Select on Map
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Order ID</label>
                            <input type="text" class="form-control" id="confirm-order-id" placeholder="BG-ORD-XXXX" required>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn--secondary" id="consumer-scan-qr">üì∑ Scan Delivery QR</button>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rate Quality (1-5 stars)</label>
                            <div class="star-rating" id="consumer-rating">
                                <span class="star" data-rating="1">‚òÖ</span>
                                <span class="star" data-rating="2">‚òÖ</span>
                                <span class="star" data-rating="3">‚òÖ</span>
                                <span class="star" data-rating="4">‚òÖ</span>
                                <span class="star" data-rating="5">‚òÖ</span>
                            </div>
                            <input type="hidden" id="rating-value" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Feedback</label>
                            <textarea class="form-control" id="confirm-feedback" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Confirm Delivery</button>
                    </form>
                </div>
            </div>
        </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="consumer-analytics-tab" class="tab-content" style="display: none;">
            <div class="analytics-header">
                <h2>My Shopping Analytics</h2>
                <div class="date-filter">
                    <select id="consumer-time-range" class="form-control form-control--sm">
                        <option>Last Month</option>
                        <option selected>Last 3 Months</option>
                        <option>Last 6 Months</option>
                        <option>Last Year</option>
                    </select>
                </div>
            </div>
            
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üõí</div>
                    <div class="kpi-value" id="consumer-kpi-orders">0</div>
                    <div class="kpi-label">Total Orders</div>
                    <div class="kpi-change positive">+7 orders</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" id="consumer-kpi-spent">‚Çπ0</div>
                    <div class="kpi-label">Total Spent</div>
                    <div class="kpi-change positive">+‚Çπ12,500</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" id="consumer-kpi-avg">‚Çπ0</div>
                    <div class="kpi-label">Avg. Order Value</div>
                    <div class="kpi-change positive">+‚Çπ180</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üíµ</div>
                    <div class="kpi-value" id="consumer-kpi-savings">‚Çπ0</div>
                    <div class="kpi-label">Total Savings</div>
                    <div class="kpi-change positive">13%</div>
                </div>
            </div>
            
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Monthly Spending</h3>
                    <canvas id="consumer-spending-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Orders by Status</h3>
                    <canvas id="consumer-status-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Category Preferences</h3>
                    <canvas id="consumer-preference-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Delivery Performance</h3>
                    <canvas id="consumer-delivery-chart"></canvas>
                </div>
                <div class="chart-card full-width">
                    <h3>Favorite Villages</h3>
                    <canvas id="consumer-villages-chart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- Location Picker Modal -->
    <div id="location-picker-modal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeLocationPicker()"></div>
        <div class="modal-content location-picker">
            <div class="modal-header">
                <h2>Select Location</h2>
                <button class="modal-close" onclick="closeLocationPicker()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="search-container">
                    <input 
                        type="text" 
                        id="location-search" 
                        placeholder="Search for a location..."
                        class="search-input"
                    />
                    <button class="search-btn" onclick="searchLocations()">üîç</button>
                </div>
                
                <div class="location-suggestions" id="location-suggestions" style="display: none;">
                    <!-- Populated with search results -->
                </div>
                
                <div id="location-map" style="height: 400px; width: 100%; border-radius: 8px; margin: 16px 0;"></div>
                
                <div class="selected-location-display">
                    <p><strong>Selected Location:</strong></p>
                    <p id="selected-address">Click on the map to select a location</p>
                    <p class="coordinates" id="selected-coordinates"></p>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeLocationPicker()">Cancel</button>
                <button class="btn btn--primary" onclick="confirmLocation()">Confirm Location</button>
            </div>
        </div>
    </div>

    <!-- QR Scanner Modal -->
    <div id="qr-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Scan QR Code</h2>
                <button class="modal-close" id="qr-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="qr-scanner-view">
                    <div class="camera-frame">
                        <div class="scan-line"></div>
                        <p>Camera View</p>
                    </div>
                </div>
                <div class="qr-scanner-options">
                    <button class="btn btn--primary" id="qr-use-camera">Use Camera</button>
                    <input type="file" id="qr-upload" accept="image/*" style="display: none;">
                    <button class="btn btn--secondary" id="qr-upload-btn">Upload Image</button>
                </div>
                <div class="form-group" style="margin-top: 1rem;">
                    <label class="form-label">Or Enter Manually</label>
                    <input type="text" class="form-control" id="qr-manual-input" placeholder="Enter ID">
                    <button class="btn btn--secondary" id="qr-manual-btn" style="margin-top: 0.5rem; width: 100%;">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>